# 代码变更任务记录：优化 UnrealCSharp 运行时执行流程图（ASCII 规范）

## 任务概述
- 目标：按 `AGENTS.md` 基本原则 #6 的 ASCII 框图规范，优化 `docs/tech/unrealcsharp-runtime-execution-flow.md` 中的流程图表达与可读性。
- 影响范围：仅文档展示；不涉及任何运行时代码与配置变更。

## 聊天与讨论背景
- 用户要求：流程图/架构图不要使用 Mermaid，改用参考示例那样的纯 ASCII 框图，并在图中标注关键代码信息。
- 触发点：`AGENTS.md` 新增了第六点绘图规范后，需要回头把已有文档的图统一到该规范。

## 设计思路
- 统一规则：所有“流程/时序/调度”图都用 ASCII 线框与箭头表达，不再使用表格式泳道或纯文本时间线。
- 强化信息：在跨线程调度的两个通道（UE 侧 AsyncTask、C# 侧 SynchronizationContext）补齐“调用点 → 入队 → 执行点”的关键切入点。

## 关键改动说明
- 为 “3) 跨线程调度”新增两张 ASCII 框图：
  - UE 侧：internal call 从后台线程进入后，用 `AsyncTask(GameThread, ...)` 派发回主线程执行敏感操作。
  - C# 侧：后台线程 `SynchronizationContext.Post` 入队，最终由 `FDomain::Tick -> SynchronizationContext.Tick` 在 GameThread 执行。
- 重绘 “6) 时序化总览图”：
  - 用单向下行的 ASCII 框图串联 T0~T_end，并用分支表示事件回调与异步加载路径，避免旧版“表格泳道”样式不符合规范。

## 涉及文件清单
- 修改：`docs/tech/unrealcsharp-runtime-execution-flow.md`
  - 新增/替换 ASCII 流程图，提升对齐与可读性。

## 验证方式与结果
- 目视检查：Markdown 代码块内的 ASCII 框图对齐、箭头方向清晰，且无 Mermaid。
- 检索确认：关键字符串存在（如 `FRegisterArray::UnRegisterImplementation`、`SynchronizationContext`、`时序化总览图`）。

## 风险与回滚
- 风险：仅文档排版层面的可读性风险；不影响功能。
- 回滚：`git checkout -- docs/tech/unrealcsharp-runtime-execution-flow.md`

