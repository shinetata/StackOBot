# 任务概述
- 目标：在 UnrealCSharp × UE 新手文档中补充“架构图”和“清晰流程图”（编辑器生成 + 运行时调用），并在图中标注关键代码信息。
- 动机：新手通常卡在“生成发生在何处/运行时怎么调”的整体心智模型；图比文字更容易形成闭环理解。
- 影响范围：仅更新文档与任务索引，不修改任何运行时逻辑。

# 聊天与讨论背景
- 用户需求：补充架构图和清晰的流程图（包括编辑器生成和运行时调用），流程图中要显示关键代码信息。
- 关键约束：文档以本仓库真实路径为准；发生文件改动需记录任务。

# 设计思路
- 使用 Mermaid 以便在 Markdown 中可版本化、可维护。
- 用 3 张图覆盖“从组件到步骤”的不同层次：
  1) 架构图：组件/目录关系与数据流向（Editor + Runtime）。
  2) 编辑器生成流程：从菜单入口 → 读取设置 → 反射遍历 → 生成 →（可选）编译输出。
  3) 运行时调用流程：域初始化 → 程序集加载 → internal call 绑定 → C# 通过句柄桥接调用 → UE 回调 C#。
- 在图节点/注释里标注关键文件/函数入口，便于读者“看到图就能跳到代码”：
  - `Plugins/UnrealCSharp/Source/ScriptCodeGenerator/Private/FGeneratorCore.cpp`
  - `Plugins/UnrealCSharp/Source/SourceCodeGenerator/SourceCodeGenerator.cs`
  - `Plugins/UnrealCSharp/Source/UnrealCSharpEditor/Private/ToolBar/UnrealCSharpPlayToolBar.cpp`
  - `Plugins/UnrealCSharp/Source/UnrealCSharpCore/Private/Domain/FMonoDomain.cpp`
  - `Plugins/UnrealCSharp/Source/UnrealCSharpCore/Private/Domain/AssemblyLoader.cpp`
  - `Plugins/UnrealCSharp/Source/UnrealCSharpCore/Public/Domain/AssemblyLoader.h`

# 关键改动说明
- `docs/tech/unrealcsharp-ue-interaction-beginner-guide.md`：
  - 在“编辑器生成链路/运行时调用链路”章节前增加 Mermaid 渲染说明。
  - 新增：
    - 架构图（组件与目录关系）
    - 编辑器生成流程图（含可选 UHT Exporter 路径）
    - 运行时调用时序图（含 AssemblyLoader/FMonoDomain/internal call 关键点）

# 关键代码解析
- 本次无代码改动；文档中的关键标注对应的运行时加载核心点包括：
  - `FUnrealCSharpFunctionLibrary::GetAssemblyLoader()`（返回运行时 AssemblyLoader）
  - `UAssemblyLoader::Load()`（从 Mono/lib/.../net 读取程序集 bytes）
  - `FMonoDomain::Initialize()` 与 `FMonoDomain::LoadAssembly()`（初始化域并加载程序集）

# 涉及文件清单
- 修改：`docs/tech/unrealcsharp-ue-interaction-beginner-guide.md` —— 新增 Mermaid 架构图与流程图，并标注关键代码信息。
- 修改：`task_record/index.md` —— 追加本次记录索引。
- 新增：`task_record/code_change_task_20260112_104709.md` —— 本次任务记录。

# 验证方式与结果
- 验证方式：
  - 目视检查 Mermaid 语法块完整（` ```mermaid ` 成对闭合）。
  - 核对图中引用的路径/函数在仓库中存在。
  - 在支持 Mermaid 的 Markdown 预览器中检查渲染效果（由用户本地完成）。
- 结果：通过（语法与路径检查完成；渲染效果需在支持 Mermaid 的环境中查看）。

