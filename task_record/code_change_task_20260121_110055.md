# code_change_task_20260121_110055

## 1. 任务概述
- 目标：补充路线 B 的详细方案，明确引擎改造点与生命周期机制。
- 动机：路线 B 描述过于简略，需给出可落地的工程级细节。
- 影响范围：仅文档更新，不涉及运行时代码变更。

## 2. 聊天与讨论背景
- 用户要求“路线 B 展开具体方案”，强调 UE 任务系统直接运行 C#。
- 约束：不引入 Native Kernel，强调 Debug/PIE 稳定性。

## 3. 设计思路
- 通过引擎侧 Worker 生命周期钩子实现托管线程身份。
- 通过 Managed Task 标记机制减少无关任务开销。
- 在 PIE Stop/Reload 流程中提供同步点，确保 Domain 可收敛。

## 4. 关键改动说明
- 扩展路线 B 章节，补充目标/边界、引擎改动点、TLS 处理、PIE 收敛流程与验证要点。
- 更新技术文档索引的最后修改时间与任务记录引用。

## 5. 关键内容解析
- Worker 生命周期：OnWorkerStart attach，OnTaskExecute 切换 Domain，OnWorkerStop detach。
- PIE Stop/Reload：禁入新任务 -> 等待 in-flight -> 切回 root domain -> Reload -> DomainGeneration++。

## 6. 涉及文件清单
- `docs/tech/unrealcsharp/unrealcsharp-taskgraph-worker-scripting-jobs-fence.md`
  - 展开路线 B 详细方案与 ASCII 流程图。
- `docs/tech/index.md`
  - 更新索引时间戳与任务记录引用。

## 7. 验证方式与结果
- 文档自检：结构完整、路径可点、ASCII 图可读。
- 未执行代码或编辑器验证（仅文档变更）。
