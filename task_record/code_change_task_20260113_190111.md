# 任务记录：搭建 baseline/testline 性能对比入口（MainMenu ReceiveBeginPlay 调用）

## 任务概述
- **目标**：在尚未引入 `PGD.dll` 的阶段，先建立一个“改动前 vs 改动后”的最小性能对比方法：同等数据量下重复执行 N 次遍历，比较总耗时。
- **约束**：采用 baseline/testline 两份代码并行维护；若 testline 确认更快，再把改动同步回 baseline。
- **触发方式**：暴露一个方法，并在 `MainMenu_C.ReceiveBeginPlay` 中调用，确保能在 UE Editor 里快速执行与回归。

## 设计要点（极简对比）
- 固定数据规模：`length=10000`
- 固定并行度：`taskCount=8`
- 固定 Query 数量：`queryCount=5`（逼近 PGD 单测“多 query 连续遍历”形态）
- 固定迭代次数：`iterations=32`，并做少量 `warmup=3`
- 输出：只打印每条线的总耗时，以及 testline/baseline ratio

## 关键改动说明
- 新增 `TaskGraphPerfComparison`：
  - baseline/testline 两条线各自实现 `ExecuteIndex(int index)`，当前内容相同，后续只改 testline。
  - 调度方式复用当前 TaskGraph 后端：`TaskGraphBatch.ExecuteBatch(...)`（阻塞）。
- 在主菜单 BeginPlay 入口调用 `TaskGraphPerfComparison.Run(...)`。

## 验证方式与预期结果
- 在 UE Editor 进入 MainMenu 关卡（触发 `MainMenu_C.ReceiveBeginPlay`）。
- 在 Output Log 中搜索：
  - `[TaskGraphPerf] baseline total=...ms`
  - `[TaskGraphPerf] testline total=...ms`
  - `[TaskGraphPerf] ... ratio=...`

## 涉及文件清单
- `Plugins/UnrealCSharp/Script/UE/Library/TaskGraphPerfComparison.cs`
  - 新增：baseline/testline 两套执行体 + 总耗时对比输出
- `Script/Game/Game/StackOBot/UI/MainMenu/MainMenu_C.cs`
  - 修改：`ReceiveBeginPlay` 调用 `TaskGraphPerfComparison.Run(...)`

