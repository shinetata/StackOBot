# 代码生成任务记录

## 1. 任务概述
- 目标：补充“TaskGraph 执行 C# vs Task.Run vs Parallel.For”的单数组性能测试用例方案。
- 动机：对齐 native kernel 用例的参数与口径，提供可落地执行的对比方案。
- 影响范围：测试方案文档与技术索引。

## 2. 聊天与讨论背景
- 用户要求追加测试方案，且明确参数与口径参考 native kernel，用于开发侧落地执行。
- 约束：纯计算、类 PGD component 处理、绑定到 PIE 入口。

## 3. 设计思路
- 复用 native kernel 用例的参数、交错顺序与中位数口径。
- 采用单数组 AddOneAndSum 任务，三条路径使用等价 chunk 切分。
- 明确 GC 控制与禁止 UObject/资源加载等约束。

## 4. 关键改动说明
- 在性能验证汇总文档中新增“TaskGraph 托管 C# vs Task.Run vs Parallel.For”用例方案，给出参数、入口与输出口径。
- 更新技术索引的最后修改日志。

## 5. 关键代码解析
- 文档新增内容指出需新增 runner（待实现），并说明 TaskGraph 托管路径采用 `TaskGraphBatch.ExecuteBatch`。
- C# 并行路径复用 `CSharpParallelPerf` 中的 chunked 实现。

## 6. 涉及文件清单
- `docs/tech/taskgraph/taskgraph-performance-verification-summary.md`
  - 新增单数组“TaskGraph 托管 C# vs Task.Run vs Parallel.For”测试用例方案。
- `docs/tech/index.md`
  - 更新对应索引行的最后修改日志。

## 7. 验证方式与结果
- 未执行（本次为方案补充）。
- 建议验证：在 `MainMenu_C.ReceiveBeginPlay()` 绑定调用后，PIE 运行并检查 `[ManagedPerfRound]/[ManagedPerfSummary]` 输出。
