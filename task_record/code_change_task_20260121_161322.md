# code_change_task_20260121_161322

## 1. 任务概述
- 目标：UE::Tasks 托管执行改为直接使用 unmanaged thunk 调用 ExecuteTaskRange，彻底移除 Runtime_Invoke。
- 动机：降低跨边界调用开销，追求极致性能。
- 影响范围：仅 UE::Tasks internal call 路径。

## 2. 聊天与讨论背景
- 用户要求不保留 Runtime_Invoke 兜底，直接改为 thunk 调用。

## 3. 设计思路
- 使用已有 `FMonoDomain::Method_Get_Unmanaged_Thunk` 获取函数指针并缓存。
- UE::Tasks 每个任务调用 `ExecuteTaskRange` thunk 处理区间。
- 不再保留 ExecuteTask 的 Runtime_Invoke fallback。

## 4. 关键改动说明
- 新增 thunk 缓存结构，改为缓存 thunk 指针而非 MonoMethod。
- ExecuteBatch / ExecuteBatchChunked 仅依赖 ExecuteTaskRange thunk。
- 移除所有 Runtime_Invoke 调用。

## 5. 关键代码解析
- 通过 `GetManagedThunkCached` 获取 `ExecuteTaskRange` thunk。
- `ExecuteBatchWithThunk` 中将 thunk reinterpret_cast 为 `void(*)(void*, int32, int32)` 并直接调用。

## 6. 涉及文件清单
- `Plugins/UnrealCSharp/Source/UnrealCSharp/Private/Domain/InternalCall/FTasks.cpp`
  - UE::Tasks 改为 thunk 直调，移除 Runtime_Invoke fallback。

## 7. 验证方式与结果
- 未执行（待用户性能测试与功能验证）。
