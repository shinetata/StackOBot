# code_change_task_20260121_141417

## 1. 任务概述
- 目标：新增 UE::Tasks 托管执行 C# 的性能对比用例，复用 3.5 的测试口径。
- 动机：补齐 UE::Tasks 版本的可重复复现实验基线。
- 影响范围：新增 C++ internal call + C# Runner 与批处理封装 + 文档同步。

## 2. 聊天与讨论背景
- 用户要求做一套 UE::Tasks 版测试，并封装为可复用函数。
- 约束：测试口径与 TaskGraph worker 版本一致。

## 3. 设计思路
- C++ 侧新增 internal call，使用 UE::Tasks 调度并在 worker 上执行托管回调。
- C# 侧封装 `UETasksBatch.ExecuteBatch` 与性能 Runner，保持与 3.5 逻辑一致。
- 文档新增 3.6 节说明用例与入口。

## 4. 关键改动说明
- 新增 `FTasks.cpp` 提供 UE::Tasks 批量执行入口。
- 新增 `UETasksBatch` 与 `UETasksManagedVsCSharpPerfRunner`。
- 更新性能汇总文档与索引。

## 5. 关键代码解析
- UE::Tasks 调度：每个 task 调用托管 `ExecuteTask`，完成后可 `Wait`。
- C# Runner：UE/PF/TR 交错执行，输出中位数与比值。

## 6. 涉及文件清单
- `Plugins/UnrealCSharp/Source/UnrealCSharp/Private/Domain/InternalCall/FTasks.cpp`
  - 新增 UE::Tasks 托管执行 internal call。
- `Plugins/UnrealCSharp/Script/UE/Library/FTasksImplementation.cs`
  - 新增 internal call 声明。
- `Plugins/UnrealCSharp/Script/UE/Library/UETasksBatch.cs`
  - 新增 UE::Tasks 批处理封装。
- `Plugins/UnrealCSharp/Script/UE/Library/UETasksManagedVsCSharpPerfRunner.cs`
  - 新增 UE::Tasks vs PF/TR 性能对比 Runner。
- `docs/tech/taskgraph/taskgraph-performance-verification-summary.md`
  - 新增 3.6 节用例说明与入口。
- `docs/tech/index.md`
  - 更新索引条目时间戳与记录引用。

## 7. 验证方式与结果
- 未执行（需要 Editor 交互）。
- 文档与代码自检：接口/路径与说明一致。
