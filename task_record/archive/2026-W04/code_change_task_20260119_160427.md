# 代码改动任务记录：docs/tech 文档索引与目录归档（按主题子目录整理）

## 1) 任务概述
- 目标：为当前较多的技术文档建立统一索引，并将文档整合到 `docs/tech/` 的主题子目录中，降低检索成本、减少路径散落与引用失效。
- 影响范围：文档与索引重排（路径变更 + 索引新增），不涉及运行时代码逻辑改动。

## 2) 聊天与讨论背景
- 用户诉求：
  - 参考 `task_record/` 的索引设计，为文档建立索引。
  - 将文档整合到 `docs/tech/` 下的子目录。
  - 索引尽量备注最后修改日志（可从 `task_record/index.md` 回溯则填写，否则留空）。
  - 将该规范补充到 `AGENTS.md`，作为后续文档编写/维护准则。

## 3) 设计思路
- 统一归档：将 `docs/tech` 下文档按主题拆分为 `unrealcsharp/`、`taskgraph/`、`pgd/` 等，并将 `docs/CodeCheck` 与 `docs/Image` 并入 `docs/tech` 的子目录（`codecheck/`、`image/`）。
- 统一索引：新增 `docs/tech/index.md`，用表格记录“分类/标题/路径/最后修改日志”。
- 最后修改日志的来源：
  - 优先采用 `task_record/index.md` 中最近一条涉及该文档的记录（若存在）。
  - 无法回溯则留空（例如图片资源）。
- 引用一致性：移动后修正文档内互相引用的路径，以及 `task_record/index.md` 中可点击的文档路径，避免索引与引用失效。

## 4) 关键改动说明
- 新增：`docs/tech/index.md` 作为技术文档总索引。
- 目录整合：
  - 将原 `docs/tech/*.md` 归档到 `docs/tech/{pgd,taskgraph,unrealcsharp}/`。
  - 将 `docs/CodeCheck/*.md` 归档到 `docs/tech/codecheck/`。
  - 将 `docs/Image/*` 归档到 `docs/tech/image/`。
- 路径修正：
  - 更新了少量文档中的互相引用路径，使其指向新的归档位置。
  - 更新了 `task_record/index.md` 中“涉及文件”列的文档路径，使其仍可点击定位到新位置。
- 规范补充：在 `AGENTS.md` 中新增“文档管理规范（强制）”章节，明确索引与归档要求。

## 5) 涉及文件清单
- 新增：
  - `docs/tech/index.md`：技术文档索引（含最后修改日志回溯字段）。
  - `task_record/archive/2026-W04/code_change_task_20260119_160427.md`：本任务记录。
- 修改：
  - `AGENTS.md`：新增“文档管理规范（强制）”。
  - `task_record/index.md`：更新涉及文档的可点击路径，并新增本任务索引行。
  - `docs/tech/unrealcsharp/unrealcsharp-taskgraph-parallel-csharp.md`：更新引用路径。
  - `docs/tech/pgd/pgd-taskgraph-unrealcsharp-exec-summary-for-leads.md`：更新引用路径。
  - `docs/tech/codecheck/taskgraph-vs-csharp-perf-runner-review.md`：更新引用路径。
  - `task_record/archive/2026-W04/code_change_task_20260119_152913.md`：更新引用路径。
- 移动（重命名/归档到新目录）：
  - `docs/tech/**/*.md`：按主题子目录归档（路径变更，内容不变）。
  - `docs/CodeCheck/taskgraph-vs-csharp-perf-runner-review.md` → `docs/tech/codecheck/taskgraph-vs-csharp-perf-runner-review.md`
  - `docs/Image/TaskGraph分配C#任务至多线程.png` → `docs/tech/image/TaskGraph分配C#任务至多线程.png`

## 6) 验证方式与结果
- 验证方式：
  - 目视检查 `docs/tech/index.md`：表格路径可点击、分类合理、最后修改日志可回溯项已填写。
  - `rg` 检查旧路径关键字在 `docs/` 下不再残留（文档引用已更新）。
  - 目视检查 `task_record/index.md`：涉及文档的路径可点击定位到新位置。
- 结果：通过。

