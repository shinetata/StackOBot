# 任务记录：默认策略调整 + UE worker 线程数绑定

## 1. 任务概述
- 目标：按默认策略改为“worker 数 + 动态抢 chunk”，并新增 GetNumWorkerThreads 绑定。
- 范围：更新 internal call、C# 绑定与 ExecuteUeParallel 默认策略实现。

## 2. 聊天与讨论背景
- 用户要求：使用默认最优策略，并补充 UE Tasks 的 GetNumWorkerThreads 绑定。

## 3. 设计思路
- C++ 暴露 UE::Tasks::GetNumWorkerThreads。
- C# 默认 taskCount 使用 UE worker 数（无效则回退 CPU-1）。
- 任务执行改为 Interlocked 动态抢 chunk，提升负载均衡。

## 4. 关键改动说明
- 新增 GetNumWorkerThreads internal call 入口。
- ExecuteUeParallel 默认 taskCount 依据 UE worker 数。
- Runner 使用动态抢 chunk 方式分配任务。

## 5. 关键代码解析
- `FTasksQuery` 增加 GetNumWorkerThreads。
- `UETasksQueryExtensions` 的 ExecuteTask 使用 Interlocked 递增索引。

## 6. 涉及文件清单
- 修改：`Plugins/UnrealCSharp/Source/UnrealCSharp/Private/Domain/InternalCall/FTasksQuery.cpp`
- 修改：`Plugins/UnrealCSharp/Script/UE/Library/FTasksQueryImplementation.cs`
- 修改：`Script/Game/PGD/Parallel/UETasksQueryExtensions.cs`
- 修改：`task_record/index.md`
- 新增：`task_record/archive/2026-W05/code_change_task_20260128_173234.md`

## 7. 验证方式与结果
- 验证方式：未运行（需要 UE Editor/脚本环境）。
- 结果：无。
