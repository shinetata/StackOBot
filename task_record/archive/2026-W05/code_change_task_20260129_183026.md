# 任务概述
- 目标：优化 FTasksQuery ExecuteBatch 在 Debug 单线程分支下的执行路径，去除重复逻辑并修复调度开销问题。
- 动机：Debug 判定被放在任务循环内导致性能劣化，同时重复逻辑难维护。
- 影响范围：仅 UnrealCSharp 内部调用的批量执行逻辑。

# 聊天与讨论背景
- 用户反馈：IsDebugSingleThread 判定后性能明显下降。
- 约束：Debug 单线程分支不使用 FManagedJobScope，避免复杂度。

# 设计思路
- 将 Debug 判定移到循环外，只判断一次。
- 提取执行单个 task 的逻辑为内联 lambda，复用异常处理路径。
- Debug 分支直接串行执行，不创建 UE::Tasks。

# 关键改动说明
- ExecuteBatchImplementation 结构重排：单次判定 + 统一执行逻辑。
- 仅在非 Debug 分支创建 TaskList 并 Launch。
- Debug 分支直接同步调用 Thunk。

# 关键代码解析
- ExecuteOne lambda：封装 Thunk 调用与异常处理。
- Debug 分支：for 循环调用 ExecuteOne 后 return。
- 非 Debug 分支：Task.Launch 内调用 ExecuteOne。

# 涉及文件清单
- Plugins/UnrealCSharp/Source/UnrealCSharp/Private/Domain/InternalCall/FTasksQuery.cpp
  - ExecuteBatchImplementation 去重与性能修正。

# 验证方式与结果
- 未执行编译/运行验证（待用户本地验证）。
