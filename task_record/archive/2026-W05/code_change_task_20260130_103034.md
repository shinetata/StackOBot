# 任务概述
- 目标：修复 ScheduleUeParallel 合并时句柄失效问题。
- 动机：CombineHandles 的 native 签名与 C# 数组不匹配，导致读取错误并提前释放 GCHandle。
- 影响范围：CombineHandles 内部调用与工具类。

# 聊天与讨论背景
- 用户反馈运行报错：UETasksQueryRunner state handle is invalid。
- 诊断：C++ 接收 long[] 使用 const int64* 读取，实际是 MonoArray*。

# 设计思路
- C++ CombineHandles 改为接收 MonoArray* 并使用 FMonoDomain::Array_Addr/Array_Length。
- C# InternalCall 去掉 handleCount 参数。
- Combine 成功后再转移 GCHandle，失败则回退为 Wait+Dispose。

# 关键改动说明
- FTasksQuery.cpp：CombineHandles 接收 MonoArray*，正确读取 handleId。
- FTasksQueryImplementation.cs：InternalCall 签名调整。
- UETasksJobHandleUtils.Combine：仅在成功后 DetachForCombine，失败回退等待释放。

# 关键代码解析
- CombineHandlesImplementation(MonoArray*): 遍历数组读取 int64。
- Combine: native 成功后转移 GCHandle，失败则安全回收。

# 涉及文件清单
- Plugins/UnrealCSharp/Source/UnrealCSharp/Private/Domain/InternalCall/FTasksQuery.cpp
  - CombineHandles 参数与读取修正。
- Plugins/UnrealCSharp/Script/UE/Library/FTasksQueryImplementation.cs
  - InternalCall 签名调整。
- Script/Game/PGD/Parallel/UETasksJobHandleUtils.cs
  - 合并时的 GCHandle 生命周期修正。

# 验证方式与结果
- 未执行编译/运行验证（待用户本地验证）。
