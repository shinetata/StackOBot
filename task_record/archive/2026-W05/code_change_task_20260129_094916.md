# 任务记录：简化 UE Tasks 并行调用链

## 1. 任务概述
- 目标：去掉冗余封装，缩短调用链，保留最小必要路径。
- 范围：移除 UETasksQueryBatch，改为直接 internal call + 回调类。

## 2. 聊天与讨论背景
- 用户认为封装过多、调用链过长，要求极简化。

## 3. 设计思路
- C# 侧直接持有 GCHandle 并调用 internal call。
- C++ 侧回调到单一静态入口 `UETasksQueryRunner.ExecuteTask`。

## 4. 关键改动说明
- 删除 `UETasksQueryBatch`，新增 `UETasksQueryRunner` 回调类。
- `ExecuteUeParallel` 直接调用 `FTasksQuery_ExecuteBatchImplementation`。
- C++ 回调目标改为 `UETasksQueryRunner.ExecuteTask`。

## 5. 关键代码解析
- 仅保留一条回调路径：C++ -> 托管 ExecuteTask -> runner.ExecuteTask。

## 6. 涉及文件清单
- 删除：`Plugins/UnrealCSharp/Script/UE/Library/UETasksQueryBatch.cs`
- 新增：`Plugins/UnrealCSharp/Script/UE/Library/UETasksQueryRunner.cs`
- 修改：`Plugins/UnrealCSharp/Source/UnrealCSharp/Private/Domain/InternalCall/FTasksQuery.cpp`
- 修改：`Script/Game/PGD/Parallel/UETasksQueryExtensions.cs`
- 修改：`task_record/index.md`
- 新增：`task_record/archive/2026-W05/code_change_task_20260129_094916.md`

## 7. 验证方式与结果
- 验证方式：未运行（需要 UE Editor/脚本环境）。
- 结果：无。
