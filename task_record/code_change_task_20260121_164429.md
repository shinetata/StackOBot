# code_change_task_20260121_164429

## 1. 任务概述
- 目标：简化 UE::Tasks 托管测试链路为单一接口，并补齐面向小白的测试方案文档。
- 动机：降低接口复杂度，明确 UE::Tasks 调用 C# 的流程与任务切分规则。
- 影响范围：UE::Tasks internal call 与 C# 封装层、技术文档与索引。

## 2. 聊天与讨论背景
- 用户要求“UE Tasks 部分简化，仅保留一个测试接口”。
- 需要输出详细文档，讲清 UE::Tasks 调用 C#、任务切分、流程图与示例代码。

## 3. 设计思路
- 合并为单一 internal call：`ExecuteBatch(state, taskCount, wait, chunkSize)`。
- 保留 chunkSize 参数用于调度粒度控制，但不再暴露多个接口名。
- 文档按“流程 + 切分 + 示例 + 操作步骤”组织，面向新手。

## 4. 关键改动说明
- C++：移除 `ExecuteBatchChunked`，`ExecuteBatch` 统一携带 chunkSize。
- C#：internal call 只保留 `FTasks_ExecuteBatchImplementation`，`UETasksBatch` 调整为单一调用。
- 文档：新增 UE::Tasks 托管测试方案说明，并更新索引。

## 5. 关键代码解析
- `ExecuteBatch` 直接调用 `ExecuteBatchWithThunk`，由 C++ 侧决定 chunkSize 与 UE worker 任务数量。
- C# `ExecuteTask` 使用区间签名 `(startIndex, count)`，在托管侧循环执行逻辑任务索引。

## 6. 涉及文件清单
- `Plugins/UnrealCSharp/Source/UnrealCSharp/Private/Domain/InternalCall/FTasks.cpp`
  - UE::Tasks internal call 简化为单一接口。
- `Plugins/UnrealCSharp/Script/UE/Library/FTasksImplementation.cs`
  - internal call 声明合并为单一方法。
- `Plugins/UnrealCSharp/Script/UE/Library/UETasksBatch.cs`
  - C# 侧改为单一接口调用。
- `docs/tech/unrealcsharp/ue-tasks-managed-test-plan.md`
  - 新增 UE::Tasks 托管测试方案文档（含流程图与示例代码）。
- `docs/tech/index.md`
  - 索引新增该文档条目。

## 7. 验证方式与结果
- 未执行（需用户运行 `UETasksManagedVsCSharpPerfRunner.RunManagedAddOneAndSumCompare` 验证）。
