# code_change_task_20260121_154711

## 1. 任务概述
- 目标：在 RunManagedAddOneAndSumCompare 中加入 UE::Tasks 分块参数，以便与 Task.Run/Parallel.For 做同一任务的可控对比。
- 动机：确保 UE::Tasks 的调度粒度可配置，便于性能对比与实验。
- 影响范围：仅影响 UETasksManagedVsCSharpPerfRunner 的测例入口与日志输出。

## 2. 聊天与讨论背景
- 用户要求对 UE::Tasks 与 Task.Run、Parallel.For 的同任务对比最终落在 RunManagedAddOneAndSumCompare。
- 需要暴露 UE 侧分块参数用于对比。

## 3. 设计思路
- 为 RunManagedAddOneAndSumCompare 增加 `ueTaskChunkSize` 参数，默认 0（自动估算）。
- 传递到 UE::Tasks 执行路径，并在总结日志中输出该参数。

## 4. 关键改动说明
- 增加 `ueTaskChunkSize` 参数与合法性校验。
- Measure/RunUeTasksOnce 传递并使用该参数。
- Summary 日志补充 `ueTaskChunkSize` 字段。

## 5. 关键代码解析
- `RunManagedAddOneAndSumCompare(..., ueTaskChunkSize, ...)` 将该参数贯穿到 `RunUeTasksOnce`。
- `UETasksBatch.ExecuteBatch(..., taskCount, ueTaskChunkSize)` 控制 UE::Tasks 侧分块策略。

## 6. 涉及文件清单
- `Plugins/UnrealCSharp/Script/UE/Library/UETasksManagedVsCSharpPerfRunner.cs`
  - 新增 `ueTaskChunkSize` 参数并贯通到 UE::Tasks 执行与日志。

## 7. 验证方式与结果
- 未执行（需用户在 Editor/运行环境中自行测试）。
- 建议对比不同 `ueTaskChunkSize` 下三者耗时与比值。
