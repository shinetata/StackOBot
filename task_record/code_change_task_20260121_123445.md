# code_change_task_20260121_123445

## 1. 任务概述
- 目标：补齐“TaskGraph worker 直接跑 C# 逻辑”的性能测试用例，并同步文档说明。
- 动机：3.5 节原先为待补内容，需要可执行的测试代码与完整记录。
- 影响范围：新增 C# Runner + 更新性能汇总文档与索引。

## 2. 聊天与讨论背景
- 用户要求在 `taskgraph-performance-verification-summary.md` 的 3.5 基础上补齐测试用例。
- 约束：不使用 NativeBuffer，纯托管数组；TaskGraph worker 直接执行 C# 逻辑。

## 3. 设计思路
- 新增专用 Runner，复用 TG/PF/TR 交错顺序与中位数统计。
- 每条路径独立构建 `int[]`，统一 chunk 切分，避免互相污染。
- 在每条路径执行前执行 GC 以降低干扰。

## 4. 关键改动说明
- 新增 `TaskGraphManagedVsCSharpPerfRunner`，实现 TG(C# managed)/PF/TR 的纯托管对比。
- 更新性能汇总文档的 3.5 节，补齐实现与入口说明。
- 更新技术文档索引时间戳与任务记录引用。

## 5. 关键代码解析
- TG 路径通过 `TaskGraphBatch.ExecuteBatch` 让 worker 执行托管回调。
- PF/TR 路径按 chunk 等价处理，并通过 `sumOk` 做一致性校验。

## 6. 涉及文件清单
- `Plugins/UnrealCSharp/Script/UE/Library/TaskGraphManagedVsCSharpPerfRunner.cs`
  - 新增：纯托管数组 TG/PF/TR 对比 Runner。
- `docs/tech/taskgraph/taskgraph-performance-verification-summary.md`
  - 更新 3.5 节实现与入口说明。
- `docs/tech/index.md`
  - 更新索引条目时间戳与任务记录引用。

## 7. 验证方式与结果
- 未执行性能测试（需要 Editor 交互）。
- 文档与代码自检：接口/路径与说明一致。
