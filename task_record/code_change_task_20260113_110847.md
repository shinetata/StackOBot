# 代码变更任务记录：验证主线程创建连续内存，TaskGraph worker 遍历修改

## 任务概述
- 目标：在已验证“TaskGraph worker 能执行 C#”的基础上，再验证一个更贴近后续并行计算的场景：**主线程创建连续内存数据（`int[]`），worker 线程在 C# 中遍历并修改该数组**。
- 约束：本次不讨论主线程等待/竞态/安全同步，仅验证“跨线程可访问 + 可修改 + 可在 worker 完成遍历计算”。

## 关键实现
- 扩展 `Script.Library.TaskGraphProbe.OnWorker(...)`：
  - 读取主线程提前创建并赋值的 `SharedInt32`
  - 计算修改前 checksum（sum）
  - 遍历并修改：`data[i] = data[i] * 2`
  - 再计算修改后 checksum，并输出首尾元素
- 提供主线程创建入口：`TaskGraphProbe.MainThreadCreateSharedInt32(int length)`

## 涉及文件清单
- 修改：`Plugins/UnrealCSharp/Script/UE/Library/TaskGraphProbe.cs`
- 修改：`docs/tech/unrealcsharp-taskgraph-parallel-csharp.md`
- 新增：`task_record/code_change_task_20260113_110847.md`
- 修改：`task_record/index.md`

## 验证方式（手动）
1) 主线程（例如 `BeginPlay`）调用：
   - `Script.Library.TaskGraphProbe.MainThreadCreateSharedInt32(10000);`
2) 投递 worker：
   - `Script.Library.TaskGraphProbe.Enqueue(123);`
3) Output Log 搜索：
   - `[TaskGraphProbe] SharedInt32 processed: ... first=0 last=19998`

## 注意事项
- 该验证不包含任何同步/等待逻辑，主线程若同时读写同一数组会产生竞态；正式方案需用阶段化/双缓冲/分区写等规约避免竞争。

