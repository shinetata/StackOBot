# code_change_task_20260121_104450

## 1. 任务概述
- 目标：在 TaskGraph worker 托管执行方案文档中补充路线 A/B 设计对比，优先说明路线 A 的落地方案。
- 动机：明确“托管 worker 池 + TaskGraph 调度”与“改引擎直接跑托管逻辑”的差异与取舍。
- 影响范围：仅文档更新，不涉及运行时代码变更。

## 2. 聊天与讨论背景
- 用户要求记录两条路线，并优先给出路线 A 的详细设计方案。
- 约束：不引入 Native Kernel，保留 UE 任务图语义，强调调试稳定性。

## 3. 设计思路
- 路线 A：UE TaskGraph 负责依赖图/完成回调，纯计算在托管线程池执行，避免 UE worker 与 Mono TLS 冲突。
- 路线 B：需要引擎级改造，让 UE worker 直接成为托管线程，代价高但可完全复用 UE 调度。

## 4. 关键改动说明
- 在现有方案文档中追加“路线 A/B”章节，包含结构图、流程图、模块划分与优缺点。
- 更新技术文档索引的最后修改时间与任务记录引用。

## 5. 关键内容解析
- 路线 A 核心链路（示意）：
  - GameThread -> TaskGraph 调度节点 -> 托管 JobQueue -> 托管 Worker 执行 -> Complete(handle) -> GraphEvent 完成。
- 路线 B 核心链路（示意）：
  - UE Worker 启动时 attach，任务执行托管逻辑，停止时 detach，并提供 PIE 收敛同步点。

## 6. 涉及文件清单
- `docs/tech/unrealcsharp/unrealcsharp-taskgraph-worker-scripting-jobs-fence.md`
  - 追加路线 A/B 设计方案与 ASCII 流程图。
- `docs/tech/index.md`
  - 更新索引条目时间戳与任务记录引用。

## 7. 验证方式与结果
- 文档自检：结构完整、路径可点、ASCII 图可读。
- 未执行代码或编辑器验证（仅文档变更）。
